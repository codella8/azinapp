{% extends "base.html" %}
{% load static %}

{% block title %}تماس با ما - AZIN GROUP{% endblock %}

{% block content %}

{% if messages %}
<div class="container mt-4">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
</div>
{% endif %}

<section class="contact-section">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-4">
                <div class="contact-info-wrapper">
                    <h3 class="section-title">راه‌های ارتباطی</h3>
                    <p class="section-description">از طریق روش‌های زیر می‌توانید با ما در ارتباط باشید</p>

                    <div class="contact-info-cards">
                      <div class="contact-card animate-on-scroll">
                            <div class="contact-icon">
                                <i class="bi bi-envelope-fill"></i>
                            </div>
                            <div class="contact-details">
                                <h4>ایمیل</h4>
                                <p> media@azingroup.com</p>
                                <span>پاسخگویی در 24 ساعت</span>
                            </div>
                        </div>
                        <div class="contact-card animate-on-scroll">
                            <div class="contact-icon">
                                <i class="bi bi-telephone-fill"></i>
                            </div>
                            <div class="contact-details">
                                <h4>تلفن</h4>
                                <p>+992 11 000 6443</p>
                            </div>
                        </div>

                        <div class="contact-card animate-on-scroll">
                            <div class="contact-icon">
                                <i class="bi bi-geo-alt-fill"></i>
                            </div>
                            <div class="contact-details">
                                <h4>آدرس</h4>
                                <p>تاجیکستان، دوشنبه</p>
                                <span>ساعات کاری: 9:00 - 18:00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-7">
                <div class="contact-form-wrapper animate-on-scroll">
                    <div class="form-header">
                        <h3>پیام خود را ارسال کنید</h3>
                    </div>

                    <form method="post" class="contact-form">
                        {% csrf_token %}

                        {% if form.errors %}
                        <div class="alert alert-danger">
                            <strong>لطفا خطاهای زیر را اصلاح کنید:</strong>
                            <ul>
                                {% for field, errors in form.errors.items %}
                                {% for error in errors %}
                                <li>{{ error }}</li>
                                {% endfor %}
                                {% endfor %}
                            </ul>
                        </div>
                        {% endif %}

                        <div class="form-row">
                            <div class="form-group">
                                <span for="{{ form.name.id_for_label }}">{{ form.name.label }}</span>
                                {{ form.name }}
                            </div>
                            <div class="form-group">
                                <span for="{{ form.email.id_for_label }}">{{ form.email.label }}</span>
                                {{ form.email }}
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="{{ form.phone.id_for_label }}">{{ form.phone.label }}</label>
                                {{ form.phone }}
                            </div>
                            <div class="form-group">
                                <label for="{{ form.subject.id_for_label }}">{{ form.subject.label }}</label>
                                {{ form.subject }}
                            </div>
                        </div>

                        <div class="form-group full-width">
                            <label for="{{ form.message.id_for_label }}">{{ form.message.label }}</label>
                            {{ form.message }}
                        </div>

                        <div class="form-submit">
                            <button type="submit" class="submit-btn">
                                <i class="bi bi-send-fill"></i>
                                ارسال پیام
                            </button>
                        </div>
                    </form>
                </div>
                <div class="map-wrapper animate-on-scroll">
                    <div class="map-header">
                        <h4>موقعیت ما روی نقشه</h4>
                    </div>
                    <div class="map-container">
                        <iframe
                            src="https://maps.google.com/maps/search/https%3A%2F%2Fmaps.app.goo.gl%2Fwa2616RSk892MRoz6%2C%20Kabul%2C%20Afghanistan%201003%2C%20Kabul%2C%20Afghanistan%201003/@34.5182,69.1807,17z?hl=en"
                            allowfullscreen="" loading="lazy" class="google-map"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock content %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const animateOnScroll = function () {
            const elements = document.querySelectorAll('.animate-on-scroll');

            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;

                if (elementTop < window.innerHeight - elementVisible) {
                    element.classList.add('animated');
                }
            });
        };

        animateOnScroll();

        window.addEventListener('scroll', animateOnScroll);
    });

    document.querySelector('.contact-form').addEventListener('submit', function (e) {
        const requiredFields = this.querySelectorAll('[required]');
        let isValid = true;

        requiredFields.forEach(field => {
            if (!field.value.trim()) {
                isValid = false;
                field.style.borderColor = '#dc3545';
            } else {
                field.style.borderColor = '';
            }
        });

        if (!isValid) {
            e.preventDefault();
            alert('لطفا تمام فیلدهای ضروری را پر کنید.');
        }
    });
</script>
{% endblock %}