{% extends "base.html" %}
{% load static %}

{% block title %}نمونه کارها - AZIN GROUP{% endblock %}

{% block content %}

<section class="portfolio-hero">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="portfolio-main-title">نمونه کارهای ما</h1>
                <p class="portfolio-subtitle">نمایشی از پروژه‌های موفق و راهکارهای نوآورانه ارائه شده به مشتریان</p>

                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number">{{ projects_show.count }}+</span>
                        <span class="stat-text">پروژه موفق</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">{{ unique_clients }}500+</span>
                        <span class="stat-text">مشتری راضی</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">5+</span>
                        <span class="stat-text">سال تجربه</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="portfolio-filter-section">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="filter-buttons text-center">
                    <button class="filter-btn active" data-filter="all">همه پروژه‌ها</button>
                    <button class="filter-btn" data-filter="web">توسعه وب</button>
                    <button class="filter-btn" data-filter="mobile">اپلیکیشن موبایل</button>
                    <button class="filter-btn" data-filter="ecommerce">تجارت الکترونیک</button>
                    <button class="filter-btn" data-filter="branding">برندینگ</button>
                    <button class="filter-btn" data-filter="marketing">بازاریابی</button>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="portfolio-section">
    <div class="container">
        {% if projects_show %}
        {% for project in projects_show %}
        <div class="portfolio-item {% cycle 'left' 'right' %} animate-on-scroll" data-category="{{ project.category }}">
            <div class="row align-items-center g-5">
                <div class="col-lg-6 {% if forloop.counter|divisibleby:2 %}order-lg-2{% endif %}">
                    <div class="portfolio-image-wrapper">
                        {% if project.image %}
                        <img src="{{ project.image.url }}" alt="{{ project.name }}" class="portfolio-img">
                        {% else %}
                        <img src="{% static 'img/project-placeholder.jpg' %}" alt="{{ project.name }}"
                            class="portfolio-img">
                        {% endif %}
                        <div class="portfolio-overlay">
                            <div class="overlay-content">
                                <h4>مشاهده جزئیات</h4>
                                <div class="tech-tags">
                                    {% for tech in project.technologies %}
                                    <span class="tech-tag">{{ tech }}</span>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6 {% if forloop.counter|divisibleby:2 %}order-lg-1{% endif %}">
                    <div class="portfolio-content">
                        <span class="project-category">{{ project.get_category_display }}</span>
                        <h3 class="project-title">{{ project.name }}</h3>
                        <p class="project-description">{{ project.description|safe }}</p>

                        <div class="project-features">
                            <h5>ویژگی‌های کلیدی:</h5>
                            <ul class="features-list">
                                {% for feature in project.features %}
                                <li>{{ feature }}</li>
                                {% empty %}
                                <li>ویژگی‌های این پروژه در حال به‌روزرسانی می‌باشد</li>
                                {% endfor %}
                            </ul>
                        </div>

                        <div class="project-meta">
                            <div class="meta-item">
                                <i class="bi bi-calendar"></i>
                                <span>زمان اجرا: {{ project.duration }}</span>
                            </div>
                            <div class="meta-item">
                                <i class="bi bi-person"></i>
                                <span>مشتری: {{ project.client }}</span>
                            </div>
                        </div>

                        <div class="project-actions">
                            {% if project.url %}
                            <a href="{{ project.url }}" class="btn primary-btn" target="_blank">
                                <i class="bi bi-eye"></i>
                                مشاهده پروژه
                            </a>
                            {% endif %}
                            <a href="#" class="btn outline-btn">
                                <i class="bi bi-info-circle"></i>
                                جزئیات بیشتر
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% if not forloop.last %}
        <div class="portfolio-divider"></div>
        {% endif %}
        {% endfor %}
        {% else %}
        <div class="text-center py-5">
            <div class="empty-state">
                <i class="bi bi-folder-x display-1 text-muted"></i>
                <h3 class="mt-4">هنوز پروژه‌ای ثبت نشده است</h3>
                <p class="text-muted">پروژه‌های ما به زودی در این بخش نمایش داده خواهند شد</p>
            </div>
        </div>
        {% endif %}
    </div>
</section>
<section class="portfolio-cta">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h2>آماده شروع پروژه بعدی خود هستید؟</h2>
                <p>با تیم متخصص ما همراه شوید و ایده‌های خود را به واقعیت تبدیل کنید</p>
                <div class="cta-buttons">
                    <a href="{% url 'contact' %}" class="btn primary-btn large-btn">
                        <i class="bi bi-chat-left-text"></i>
                        درخواست مشاوره
                    </a>
                    <a href="{% url 'services' %}" class="btn outline-btn large-btn">
                        <i class="bi bi-list-ul"></i>
                        مشاهده خدمات
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const filterButtons = document.querySelectorAll('.filter-btn');
        const portfolioItems = document.querySelectorAll('.portfolio-item');

        filterButtons.forEach(button => {
            button.addEventListener('click', function () {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');

                const filterValue = this.getAttribute('data-filter');

                portfolioItems.forEach(item => {
                    if (filterValue === 'all' || item.getAttribute('data-category') === filterValue) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        });

        const animateOnScroll = function () {
            const elements = document.querySelectorAll('.animate-on-scroll');

            elements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const elementVisible = 150;

                if (elementTop < window.innerHeight - elementVisible) {
                    element.classList.add('animated');
                }
            });
        };

        animateOnScroll();
        window.addEventListener('scroll', animateOnScroll);
    });
</script>
{% endblock %}